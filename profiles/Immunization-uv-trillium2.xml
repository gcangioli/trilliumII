<?xml version="1.0" encoding="utf-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
  <meta>
    <lastUpdated value="2018-03-08T09:19:21.307+01:00" />
  </meta>
  <url value="http://trilliumbridge.eu/fhir/StructureDefinition/immunization-uv-trillium2" />
  <name value="Immunization-uv-trillium2" />
  <status value="draft" />
  <date value="2017-12-21T18:38:14.915+02:00" />
  <publisher value="THL" />
  <description value="This profile represents the constraints applied to the Immunization resource by the Trillium II Project. A record of an immunization is represented in the patient summary as an instance of an Immunization resource constrained by this profile." />
  <purpose value="Immunization summary profile for Trillium 2" />
  <fhirVersion value="3.0.1" />
  <kind value="resource" />
  <abstract value="false" />
  <type value="Immunization" />
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/Immunization" />
  <differential>
    <element id="Immunization.extension">
      <path value="Immunization.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
    </element>
    <element id="Immunization.extension:statementDetails">
      <path value="Immunization.extension" />
      <sliceName value="statementDetails" />
      <short value="Optional Extensions Element" />
      <definition value="Optional Extension Element - found in all resources." />
      <type>
        <code value="Extension" />
        <profile value="http://trilliumbridge.eu/fhir/StructureDefinition/statement-uv-trillium2" />
      </type>
    </element>
    <element id="Immunization.vaccineCode.coding">
      <path value="Immunization.vaccineCode.coding" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="system" />
        </discriminator>
        <description value="One slice per system of representation of vaccines. &#xD;&#xA;Supports vaccine classifications and medicinal products identifiers and classes.&#xD;&#xA;&#xD;&#xA;When the IDMP identifiers will be concretely available for usage this element will be used for conveying the Medicinal Product Identifier (MPID).&#xD;&#xA;For the time being, it could be optionally used for conveying jurisdictional or agreed cross jurisdictional product code." />
        <rules value="open" />
      </slicing>
    </element>
    <element id="Immunization.vaccineCode.coding:vaccineType">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="vaccineType" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Immunization.vaccineCode.coding:vaccineType.userSelected">
      <path value="Immunization.vaccineCode.coding.userSelected" />
      <max value="0" />
    </element>
    <element id="Immunization.vaccineCode.coding:pharmaceuticalProduct-L1">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="pharmaceuticalProduct-L1" />
      <short value="Pharmaceutical Product Identifier, Level 1" />
    </element>
    <element id="Immunization.vaccineCode.coding:pharmaceuticalProduct-L2">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="pharmaceuticalProduct-L2" />
    </element>
    <element id="Immunization.vaccineCode.coding:pharmaceuticalProduct-L3">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="pharmaceuticalProduct-L3" />
    </element>
    <element id="Immunization.vaccineCode.coding:pharmaceuticalProduct-L4">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="pharmaceuticalProduct-L4" />
    </element>
    <element id="Immunization.vaccineCode.coding:medicinalProduct">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="medicinalProduct" />
      <short value="Medicinal Product Identifier" />
      <definition value="The identifier of the administered Medicinal Product.&#xD;&#xA;It might be a National Product ID or in the next future the IDMP Medicinal Product Identifier (MPID) - Uniquely identifies a Medicinal Product, reflecting (but not replacing) any other authorisation numbers allocated by a regulator.&#xD;&#xA;MPID implies one (set of) PhPID.&#xD;&#xA;The MPID shall use a common segment pattern related to a Medicinal Product, which&#xD;&#xA;when each segment is valued shall define a specific MPID concept. The pattern is:&#xD;&#xA;• a) Country code segment (ISO 3166-1 alpha-2 code elements);&#xD;&#xA;• b) Marketing Authorization Holder (Organization Identifier) code segment;&#xD;&#xA;• c) Medicinal Product code segment (Unique Medicinal Product Identifier).&#xD;&#xA;• Any change of the values related to these three code segments shall result in the&#xD;&#xA;assignment of a new MPID.&#xD;" />
    </element>
    <element id="Immunization.vaccineCode.coding:medicinalProduct.display">
      <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-translatable">
        <valueBoolean value="true" />
      </extension>
      <path value="Immunization.vaccineCode.coding.display" />
      <short value="Trade or Brand Name (MP)" />
      <definition value="The registered name of the Medicinal Product" />
    </element>
    <element id="Immunization.vaccineCode.coding:packagedProduct">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="packagedProduct" />
      <short value="Commercial Packaged Product ID" />
      <definition value="It identifies the commercial packaged product, it might be a jurisictioal identifier or in the next future the IDMP PCID." />
    </element>
    <element id="Immunization.vaccineCode.coding:packagedProduct.display">
      <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-translatable">
        <valueBoolean value="true" />
      </extension>
      <path value="Immunization.vaccineCode.coding.display" />
      <short value="Trade or Brand Name (PC)" />
      <definition value="The registered name of the Commercial Packaged Product" />
    </element>
    <element id="Immunization.vaccineCode.coding:class">
      <path value="Immunization.vaccineCode.coding" />
      <sliceName value="class" />
    </element>
    <element id="Immunization.patient">
      <path value="Immunization.patient" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://trilliumbridge.eu/fhir/StructureDefinition/patient-uv-trillium2" />
      </type>
    </element>
    <element id="Immunization.encounter">
      <path value="Immunization.encounter" />
      <max value="0" />
    </element>
    <element id="Immunization.reportOrigin">
      <path value="Immunization.reportOrigin" />
      <max value="0" />
    </element>
    <element id="Immunization.location">
      <path value="Immunization.location" />
      <max value="0" />
    </element>
    <element id="Immunization.manufacturer.reference">
      <path value="Immunization.manufacturer.reference" />
      <max value="0" />
    </element>
    <element id="Immunization.manufacturer.identifier">
      <path value="Immunization.manufacturer.identifier" />
      <max value="0" />
    </element>
    <element id="Immunization.expirationDate">
      <path value="Immunization.expirationDate" />
      <max value="0" />
    </element>
    <element id="Immunization.practitioner">
      <path value="Immunization.practitioner" />
      <max value="1" />
    </element>
    <element id="Immunization.practitioner.role">
      <path value="Immunization.practitioner.role" />
      <max value="0" />
    </element>
    <element id="Immunization.note">
      <path value="Immunization.note" />
      <max value="0" />
    </element>
    <element id="Immunization.note.author[x]">
      <path value="Immunization.note.author[x]" />
      <max value="0" />
    </element>
    <element id="Immunization.note.time">
      <path value="Immunization.note.time" />
      <max value="0" />
    </element>
    <element id="Immunization.explanation.reason">
      <path value="Immunization.explanation.reason" />
      <max value="0" />
    </element>
    <element id="Immunization.explanation.reasonNotGiven">
      <path value="Immunization.explanation.reasonNotGiven" />
      <max value="1" />
    </element>
    <element id="Immunization.reaction">
      <path value="Immunization.reaction" />
      <max value="1" />
    </element>
    <element id="Immunization.reaction.date">
      <path value="Immunization.reaction.date" />
      <max value="0" />
    </element>
    <element id="Immunization.reaction.detail.reference">
      <path value="Immunization.reaction.detail.reference" />
      <max value="0" />
    </element>
    <element id="Immunization.reaction.detail.identifier">
      <path value="Immunization.reaction.detail.identifier" />
      <max value="0" />
    </element>
    <element id="Immunization.reaction.reported">
      <path value="Immunization.reaction.reported" />
      <max value="0" />
    </element>
    <element id="Immunization.vaccinationProtocol">
      <path value="Immunization.vaccinationProtocol" />
      <max value="1" />
    </element>
    <element id="Immunization.vaccinationProtocol.extension">
      <path value="Immunization.vaccinationProtocol.extension" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="url" />
        </discriminator>
        <rules value="open" />
      </slicing>
    </element>
    <element id="Immunization.vaccinationProtocol.extension:vaccinationValidity">
      <path value="Immunization.vaccinationProtocol.extension" />
      <sliceName value="vaccinationValidity" />
      <short value="Validity of Vaccination in years, months, days OR exprssed as a period of time" />
      <definition value="Validity of Vaccination" />
      <max value="1" />
      <type>
        <code value="Extension" />
        <profile value="http://hl7.org/fhir/ips/StructureDefinition/vaccinationvalidity-immunization-uv-trillium2" />
      </type>
    </element>
    <element id="Immunization.vaccinationProtocol.doseSequence">
      <path value="Immunization.vaccinationProtocol.doseSequence" />
      <max value="0" />
    </element>
    <element id="Immunization.vaccinationProtocol.description">
      <path value="Immunization.vaccinationProtocol.description" />
      <max value="0" />
    </element>
    <element id="Immunization.vaccinationProtocol.authority">
      <path value="Immunization.vaccinationProtocol.authority" />
      <max value="0" />
    </element>
    <element id="Immunization.vaccinationProtocol.series">
      <path value="Immunization.vaccinationProtocol.series" />
      <max value="0" />
    </element>
    <element id="Immunization.vaccinationProtocol.doseStatusReason">
      <path value="Immunization.vaccinationProtocol.doseStatusReason" />
      <max value="0" />
    </element>
  </differential>
</StructureDefinition>